<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Registration</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem 0;
        }
        
        .debug-container {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .form-section {
            display: none;
        }
        
        .form-section.active {
            display: block;
        }
        
        .btn-debug {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-debug:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="debug-container">
            <h2 class="text-center mb-4">Debug Registration</h2>
            
            <!-- Step 1 -->
            <div class="form-section active" id="section-1">
                <h4>Step 1: Test Form</h4>
                <div class="mb-3">
                    <label class="form-label">First Name</label>
                    <input type="text" class="form-control" id="firstName" value="John" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control" id="email" value="john@test.com" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-control" id="password" value="Test123!" required>
                </div>
                
                <button type="button" class="btn btn-debug" id="next-step-2">
                    Continue to Step 2
                </button>
                
                <div class="mt-3">
                    <button type="button" class="btn btn-secondary" onclick="testClick()">
                        Test Direct Click
                    </button>
                </div>
            </div>
            
            <!-- Step 2 -->
            <div class="form-section" id="section-2">
                <h4>Step 2: Success!</h4>
                <p>The button worked! You made it to step 2.</p>
                <button type="button" class="btn btn-secondary" id="back-to-1">
                    Back to Step 1
                </button>
            </div>
            
            <!-- Debug Info -->
            <div class="mt-4 p-3 bg-light rounded">
                <h6>Debug Info:</h6>
                <div id="debug-info">Loading...</div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        console.log('Debug script loaded');
        
        // Test function for direct click
        function testClick() {
            console.log('Direct click test worked!');
            alert('Direct click test worked!');
            document.getElementById('debug-info').innerHTML += '<br>Direct click test: SUCCESS';
        }
        
        class DebugRegistration {
            constructor() {
                this.currentStep = 1;
                console.log('DebugRegistration constructor called');
                this.init();
            }
            
            init() {
                console.log('DebugRegistration init called');
                this.setupEventListeners();
                this.updateDebugInfo();
            }
            
            setupEventListeners() {
                console.log('Setting up event listeners...');
                
                const nextStep2 = document.getElementById('next-step-2');
                console.log('nextStep2 element:', nextStep2);
                
                if (nextStep2) {
                    console.log('Adding click listener to next-step-2');
                    nextStep2.addEventListener('click', (e) => {
                        console.log('Next step 2 clicked!');
                        e.preventDefault();
                        this.goToStep(2);
                    });
                    
                    // Also add a direct onclick as backup
                    nextStep2.onclick = (e) => {
                        console.log('Next step 2 onclick triggered!');
                        e.preventDefault();
                        this.goToStep(2);
                    };
                } else {
                    console.error('next-step-2 button not found!');
                }
                
                const backTo1 = document.getElementById('back-to-1');
                if (backTo1) {
                    backTo1.addEventListener('click', (e) => {
                        console.log('Back to 1 clicked!');
                        e.preventDefault();
                        this.goToStep(1);
                    });
                }
            }
            
            goToStep(step) {
                console.log('goToStep called with step:', step);
                
                // Hide all sections
                document.querySelectorAll('.form-section').forEach(section => {
                    section.classList.remove('active');
                });
                
                // Show target section
                const targetSection = document.getElementById(`section-${step}`);
                if (targetSection) {
                    targetSection.classList.add('active');
                    console.log('Switched to section:', step);
                } else {
                    console.error('Target section not found:', `section-${step}`);
                }
                
                this.currentStep = step;
                this.updateDebugInfo();
            }
            
            updateDebugInfo() {
                const debugInfo = document.getElementById('debug-info');
                if (debugInfo) {
                    debugInfo.innerHTML = `
                        Current Step: ${this.currentStep}<br>
                        Button Element: ${document.getElementById('next-step-2') ? 'Found' : 'NOT FOUND'}<br>
                        Event Listeners: Set up<br>
                        Time: ${new Date().toLocaleTimeString()}
                    `;
                }
            }
        }
        
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM loaded, initializing debug registration');
            window.debugRegistration = new DebugRegistration();
            
            // Additional test - try to find the button after a delay
            setTimeout(() => {
                const btn = document.getElementById('next-step-2');
                console.log('Button check after delay:', btn);
                if (btn) {
                    console.log('Button innerHTML:', btn.innerHTML);
                    console.log('Button onclick:', btn.onclick);
                }
            }, 1000);
        });
        
        // Also try immediate initialization
        console.log('Immediate check - DOM ready state:', document.readyState);
        if (document.readyState === 'loading') {
            console.log('DOM still loading, waiting for DOMContentLoaded');
        } else {
            console.log('DOM already loaded, initializing immediately');
            window.debugRegistration = new DebugRegistration();
        }
    </script>
</body>
</html>
